<template>
<transition name="fade">
  <div v-if="visible" class="popup-container">
    <div class="popup">
      <h2>{{ title }}<HelpCircle :size="16" v-if="title === 'æˆå°±'" @click="showAchievementNotePopup = true" class="helpcircle"></HelpCircle></h2>
      <slot></slot>
      <p id="textboxPopup" v-if="title ==='å®¢å®˜ä»Šå¤©æ‰“ç®—åƒç‚¹ä»€ä¹ˆï¼Ÿ'">åƒç‚¹ä»€ä¹ˆå‘¢â€¦â€¦</p>
      <p id="textboxPopup" v-if="title ==='ä¹°å–çš„ï¼'">å–æ¯ä»€ä¹ˆå‘¢â€¦â€¦</p>
      <p id="textboxPopup" v-if="title ==='ä¹°ä¸œè¥¿ï¼'">è¦ä¹°ä»€ä¹ˆå‘¢ï¼Ÿ</p>
      <p id="textboxPopup" v-if="title ==='åœ°ä¸‹é’±åº„'">æ¬¢è¿å…‰ä¸´ï½æœ¬åº—æœ‰é‡‘æ¡å‡ºå”®ï¼Œä»·æ ¼å…¬é“ã€æš´åˆ©å¤šé”€ã€ä¹°å–è‡ªç”±ã€‚è¯·é—®è€æ¿ä»Šå¤©æ˜¯è¦ä¹°è¿˜æ˜¯å–å‘¢ï¼Ÿ</p>
      <p id="textboxPopup" v-if="title ==='å†™æ­Œ'">ä¸€èµ·å†™æ­Œå§ï¼</p>
      <p id="textboxPopup" v-if="title ==='ç‰©å“'"></p>
      <p id="textboxPopup" v-if="title ==='é£ç‚æ–‡åŒ–'"></p>
      <p id="textboxPopup" v-if="title ==='äº¤æ˜“æ‰€'">ã€ç³»ç»Ÿã€‘æ­å–œå§œäº‘å‡å·²è§£é”æˆå°±ã€æ±¤è‡£äº¿å“ã€‘ï¼Œåœ°ä¸‹é’±åº„å·²å‡çº§ä¸ºäº¤æ˜“æ‰€ğŸ”‘å‘æ‚¨å¼€æ”¾ï¼Œç°å·²å¼€æ”¾åŒºåŸŸæœ‰äº¤æ˜“æ‰€åŒ—å¸‚Â·åœ°ä¸‹é’±åº„ï¼ˆåŸï¼‰ã€äº¤æ˜“æ‰€è¥¿å¸‚Â·æŠ•èµ„ä¸­å¿ƒï¼</p>
      <button v-if="showCloseButton" @click="$emit('close')" class="close-button"><X></X></button>
    </div>
  </div>
</transition>
</template>

<script setup lang="ts">
import { HelpCircle, X } from 'lucide-vue-next'
import { showAchievementNotePopup } from '../components/composables/gameRefs'

const props = defineProps({
  title: String,
  visible: Boolean,
  showCloseButton: {
    type: Boolean,
    default: true
  }
})
</script>

<style scoped>
.popup-container {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 100;
}

.popup {
  position: relative;
  background-color: white;
  border-radius: 5px;
  padding: 20px;
  width: 42vh;
  max-width: 500px;
  border: 2px solid #1e2228;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.popup h2 .helpcircle {
  margin-left: 0.25rem;
  cursor: pointer;
}

.popup #textboxPopup {
  font-size: 0.9rem;
}

.close-button {
  position: absolute;
  top: 10px;
  right: 10px;
  border: none;
  background: transparent;
  cursor: pointer;
  outline: none;
  color: #1e2228;
  padding: 10px;
}

.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.3s;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}
</style>
